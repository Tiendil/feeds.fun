# Changelog

All notable changes to this project will be documented in this file.

Generated by [Changy](https://github.com/Tiendil/changy/tree/main).

## Unreleased

No changes.

## 1.19.5 on 2025-06-07

- ff-361 Fixed failure of tag processor in case it is trying to process an orphan entry.
- ff-349 Improved validating of the values in the user settings (`10,1` -> `10.1`).

## 1.19.4 on 2025-06-07

- ff-358 — `ffun cleaner clean` command now removes all orphaned entries, not only the first chunk.
- ff-360 — Fixed Sentry reporting for async background tasks.
- ff-359 — `ffun` cli command now correctly works in the production environment (when no dev dependencies are installed).

## 1.19.3 on 2025-05-17

- ff-348 — Fixed on-release chain of GitHub action calls.

## 1.19.2 on 2025-05-17

- Made '.env' file optional for frontend-data image.

## 1.19.1 on 2025-05-17

- ff-335 — Official Docker image for the backend
- ff-337 — Official Docker image for the frontend
- ff-337 — Added `VITE_FFUN_HAS_COLLECTIONS` env variable to enable/disable collections in the frontend
- ff-341 — Added multi-user docker-compose example
- ff-342 — GitHub action to update DockerHub repository descriptions

## 1.19.0 on 2025-05-09

**Operations required AFTER UPDATE**:

1. Run migrations `ffun migrate`

Changes:

- ff-326 — Dependency on the tabler-icons CDN is replaced by a local copy of icons.
- ff-317 — Added footer element and pages for Terms of Service and Privacy Policy.
- ff-316 — Added a modal dialog for "cookie consent". Analytics collection is disabled until the user accepts cookies.
- ff-322 — The user can remove their own account from the system from the Settings page.

## 1.18.2 on 2025-04-23

- ff-298 — Tracking user events on the frontend is disabled by default.
- ff-298 — Passing of `utm_*` URL query parameters to the backend.

## 1.18.1 on 2025-04-18

- ff-227 — Added "hide/show sidebar" button.
- ff-292 — r/SomebodyMakeThis added to the entrepreneurship collection.
- ff-243 — Updated Google models' description to flash-2, because flash-1.5 is deprecated.
- ff-294 — Added OpenAI 4.1 models.

## 1.18.0 on 2025-03-28

- ff-225 — Slightly bigger vertical spacing on the main page on mobile devices
- ff-232 — Access to news from collections without registration. The parameter `slug` was added to the collections config. Set it to the name of the collection you want to see in URLs.
- ff-232 — URL now changes to reflect the current tags filter state.
- ff-232 — Improved performance of frontend on first loading of news list.
- ff-196 — If there is no news in the requested period, Feeds Fun will load some older news to show something to demonstrate that feeds are alive.

## 1.17.1 on 2025-02-27

- ff-225 — Added new screenshots.

## 1.17.0 on 2025-02-27

- ff-225 — Full GUI restyling.

## 1.16.6 on 2025-02-11

- ff-221 — Added tracking of tag filter usage.

## 1.16.5 on 2025-01-16

- Added the new screenshot, to better represent recent UI changes.

## 1.16.4 on 2025-01-15

- ff-219 — Fixed sending User-Agent header in requests.
- ff-220 — Improved GUI of the "mark read/unread" operation. Added "undo mark as read" button.

## 1.16.3 on 2025-01-10

- ff-209 - Uped priority of Reddit feeds discoverer "hack".

## 1.16.2 on 2025-01-10

- ff-209 — Improved logging for feeds loading & discovering logic.

## 1.16.1 on 2025-01-01

- ff-205 — fixed processing of quota errors in Google LLM provider.
- ff-206 — skip entries that caused temporary errors in the general LLM processor.

## 1.16.0 on 2024-12-28

**Operations required AFTER UPDATE**:

1. Run migrations `ffun migrate`

Changes:

- ff-174 — Custom API entry points for OpenAI and Gemini clients.
- ff-175 — Export feeds to OPML file.
- ff-171 — Simplified rules creation:
  - The rules creation form was moved to the tags filter.
  - Rules now allow specifying excluded tags (will not apply if the news has any of them).
  - Tags under the news caption now behave as tags in the tags filter.
  - Button `[more]` on the tags line under the news caption now opens the whole news.
  - Openned news items now always show all tags.
  - Only a single news item now can be opened.
  - Performance of the News page improved 2-3 times.
- ff-172 — Added feeds collection "Entrepreneurship & Startups". Also added cli commands `ffun estimates entries-per-day-for-collection` and `ffun estimates entries-per-day-for-feed`
- ff-199 — Fixed Reddit feeds discovery.

## 1.15.0 on 2024-12-15

- ff-173 — Significantly improved feeds discovery. Also:
  - Added types for URL values for better consistency control.
  - GUI now will reload news and feeds after importing an OPML file.

## 1.14.2 on 2024-11-21

- ff-156 — Further optimizations of `/api/get-last-entries`, concentrated on `ontology.operations.get_tags_for_entries`.

## 1.14.1 on 2024-11-18

- ff-158 — Improved prompts to produce less tags of better quality.
- ff-159 — Fixed the exception in the API when no entries found.
- ff-153 — The model Gemini 1.0 pro is removed from fixtures because Google discontinued its support.

## 1.14.0 on 2024-11-14

- ff-155 — Performance improvements.

  - use [orjson](https://github.com/ijl/orjson) instead of standard json lib for response serialization;
  - changed response format of `/api/get-last-entries` and `/api/get-entries-by-ids` API to reduce the size of the response and speed up its generation.

## 1.13.3 on 2024-11-07

- Track only user metrics with values != 0.

## 1.13.2 on 2024-11-07

In this release, we added a bunch of tracking functionality to better understand how users interact with the app.

This analytics:

- is strongly for our internal use;
- uses only internal IDs — does not contain emails, urls, etc.
- in most cases does not exceed what we already have in logs and database — just a more convenient way to access the data.

Changes:

- Frontend dependencies upgraded.
- ff-141 — Track frontend events `news_link_opened`, `news_body_opened`.
- ff-103 — Added `in_collection` marker to `feed_linked` and `feed_unlinked` events.
- ff-142 — CLI command to track aggregated metrics.
- ff-143 — Fixed a situation when, after removing a feed on the Feeds page, the feeds list was not updated.
- ff-145 — Track users' interest in feeds.fun social channels.
- ff-119 — Track OPML imports.
- ff-112 — Track subscriptions on feeds from collections.
- ff-131 — Track subscription dynamics on feeds.fun news channels.

## 1.13.1 on 2024-10-31

- Added normalization to business event attributes.

## 1.13.0 on 2024-10-31

- Updated frontend packages.

## 1.12.8 on 2024-10-31

- ff-70 — Business events are written in logs.

## 1.12.7 on 2024-10-24

- ff-68 — Tech metrics are written in logs. They can be filtered and processed by tools such as SplitBit or Vector and redirected to monitoring systems. Note that metrics are written at the INFO log level—if a higher log level is set, they will be hidden with all INFO logs.

## 1.12.6 on 2024-10-22

- Changed the environment variables prefix for logs settings from `FFUN_` to `FFUN_LOGS_`.

## 1.12.5 on 2024-10-14

- Mark all ssl errors catched by httpx as expected.

## 1.12.4 on 2024-10-14

- Connection error `[SSL: TLSV1_UNRECOGNIZED_NAME]` added to the list of known "ok" errors for the feeds loader.

## 1.12.3 on 2024-10-14

- Connection error `[SSL: CERTIFICATE_VERIFY_FAILED]` added to the list of known "ok" errors for the feeds loader.

## 1.12.2 on 2024-10-14

- ff-56 — Connection error `[SSL: WRONG_VERSION_NUMBER]` added to the list of known "ok" errors for the feeds loader.
- ff-51 — "No description" text for feeds without a description in the Feeds list.
- ff-52 — Fixed the `remove-deprecated-settings` command, now it really removes only deprecated settings.
- ff-50 — Unsubscribing from a feed now do not lead to excessive server requests due to cache invalidation.

## 1.12.1 on 2024-10-12

- Removed dependency on `pkg_resources`.

## 1.12.0 on 2024-10-12

**Operations required AFTER UPDATE**:

1. Run migrations `ffun migrate`
2. Run `ffun user-settings remove-deprecated-settings`
3. If you are using an OpenAI tag processor, specify a custom configuration file for tag processors with an API key. Details can be found in the updated README.md
4. If you want to periodically clean your database from old entries, add the call `ffun cleaner clean` to your cron tasks. It is recommended.

Changes:

- [gh-229](https://github.com/Tiendil/feeds.fun/issues/229) — Removed `Allow using OpenAI key for feeds in standard collections` user settings. It was confusing for users and not usable in the project's current state. Instead, you can specify an LLM API key to process collections (one per tag processor). By new logic, the service's owner is responsible for managing tags for all feeds in collections.
- [gh-245](https://github.com/Tiendil/feeds.fun/issues/245) — Implemented the universal LLM tag processor. Currently, it supports two API providers: OpenAI (ChatGPT) and Google (Gemini). Also:
    - The configuration of tag processors was moved to a separate file; see README.md for actual details.
    - The configuration of LLM models was moved to a separate file; see README.md for actual details.
    - You can configure multiple LLM tag processors with different parameters, including prompts, API keys, etc.
    - Token usage tracking has been replaced with cost tracking. User settings will convert automatically.
- Collections refactored. Now, they are configurable and empty by default. You can specify the path to the directory with collections configuration in `FFUN_FEEDS_COLLECTIONS_COLLECTION_CONFIGS`. An example of configuration can be found in the `./feeds_collections/collections`.
- `FFUN_META_MAX_ENTRIES_PER_FEED` setting moved to `FFUN_LIBRARY_MAX_ENTRIES_PER_FEED`.

## 1.11.1 on 2024-08-25

- [gh-136](https://github.com/Tiendil/feeds.fun/issues/136) — Links to the Discord server and to the Reddit community.
- [gh-24](https://github.com/Tiendil/feeds.fun/issues/24) — Link to the blog. Blog RSS is added to collections.

## 1.11.0 on 2024-08-21

- [gh-220](https://github.com/Tiendil/feeds.fun/issues/220) Removed Home link from internal pages.
- [gh-221](https://github.com/Tiendil/feeds.fun/issues/221) Slighly increased width of the central column on the main page.
- [gh-241](https://github.com/Tiendil/feeds.fun/issues/241) Optional plausible analytics for the frontend.
- [gh-41](https://github.com/Tiendil/feeds.fun/issues/41) Build dev service images only once.

## 1.10.1 on 2024-08-09

- [gh-231](https://github.com/Tiendil/feeds.fun/issues/231) CLI tool and base of texts to measure quality of tag processors.
- [gh-233](https://github.com/Tiendil/feeds.fun/issues/233) Improved prompt of OpenAI General processor. It should start to output more relevant tags.
- [gh-234](https://github.com/Tiendil/feeds.fun/issues/234) (possibly) Fixed deadlocks in updating tags properties by `apply_tags_properties`.

## 1.10.2 on 2024-08-09

- [gh-231](https://github.com/Tiendil/feeds.fun/issues/231) CLI tool and base of texts to measure quality of tag processors.
- [gh-233](https://github.com/Tiendil/feeds.fun/issues/233) Improved prompt of OpenAI General processor. It should start to output more relevant tags.
- [gh-234](https://github.com/Tiendil/feeds.fun/issues/234) (possibly) Fixed deadlocks in updating tags properties by `apply_tags_properties`.

## 1.10.0 on 2024-07-21

**Configs migration:** if you have turned on OpenAI ChatGPT processors, like `FFUN_LIBRARIAN_OPENAI_CHAT_35_FUNCTIONS_PROCESSOR__ENABLED="True"` or `FFUN_LIBRARIAN_OPENAI_CHAT_35_PROCESSOR__ENABLED="True", remove their configs and add configs for OpenAI General Processor, like `FFUN_LIBRARIAN_OPENAI_GENERAL_PROCESSOR__ENABLED="True"`, instead. The semantic of the configs is the same.

- [gh-227](https://github.com/Tiendil/feeds.fun/issues/227) — Old OpenAI ChatGPT processors is replaced with OpenAI General Processor which utilizes power of GPT-4o-mini model.

## 1.9.0 on 2024-07-19

**Recommendation:** Because `GPT-4o-mini` is much smarter than `GPT-3.5-turbo`, I recommend you to disable GPT function processor `FFUN_LIBRARIAN_OPENAI_CHAT_35_FUNCTIONS_PROCESSOR__ENABLED="False"` and use only standard GPT processor `FFUN_LIBRARIAN_OPENAI_CHAT_35_PROCESSOR__ENABLED="False"`. In [gh-227](https://github.com/Tiendil/feeds.fun/issues/227), one of the processors will be refactored, and one of them will be removed.

- [gh-226](https://github.com/Tiendil/feeds.fun/issues/226) Switch used OpenAI model to gpt4o-mini

## 1.8.1 on 2024-06-06

DB migration required: **no**

- [gh-217](https://github.com/Tiendil/feeds.fun/issues/217) Fixed: `apply_tags_properties` fails because of duplicated tags.

## 1.8.0 on 2024-06-05

DB migration required: **yes**

- [gh-214](https://github.com/Tiendil/feeds.fun/issues/214) Added not null constraint to the `o_tags_properties.tag_id` column.
- [gh-213](https://github.com/Tiendil/feeds.fun/issues/213) Fixed: `Native tags` tags processor periodically fails with deadlock in the database.

## 1.7.0 on 2024-06-02

Breaking changes:

- [gh-68](https://github.com/Tiendil/feeds.fun/issues/68) Supertokens services upgraded to version 9.0.2. If you are using Supertokens, you should upgrade them manually (from 5.0.0 to 9.0.2) according to the instructions in https://github.com/supertokens/supertokens-core/blob/master/CHANGELOG.md

Changes:

- [gh-128](https://github.com/Tiendil/feeds.fun/issues/128) Code migrated to Python 3.12
- [gh-128](https://github.com/Tiendil/feeds.fun/issues/128) Upgraded backend dependencies to the latest suitable versions
- [gh-205](https://github.com/Tiendil/feeds.fun/issues/205) Changelog added, with help of [Changy](https://github.com/Tiendil/changy)