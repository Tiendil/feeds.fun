# Changelog

All notable changes to this project will be documented in this file.

Generated by [Changy](https://github.com/Tiendil/changy/tree/main).

## Unreleased

No changes.

## 1.13.0 on 2024-10-31

- Updated frontend packages.

## 1.12.8 on 2024-10-31

- ff-70 — Business events are written in logs.

## 1.12.7 on 2024-10-24

- ff-68 — Tech metrics are written in logs. They can be filtered and processed by tools such as SplitBit or Vector and redirected to monitoring systems. Note that metrics are written at the INFO log level—if a higher log level is set, they will be hidden with all INFO logs.

## 1.12.6 on 2024-10-22

- Changed the environment variables prefix for logs settings from `FFUN_` to `FFUN_LOGS_`.

## 1.12.5 on 2024-10-14

- Mark all ssl errors catched by httpx as expected.

## 1.12.4 on 2024-10-14

- Connection error `[SSL: TLSV1_UNRECOGNIZED_NAME]` added to the list of known "ok" errors for the feeds loader.

## 1.12.3 on 2024-10-14

- Connection error `[SSL: CERTIFICATE_VERIFY_FAILED]` added to the list of known "ok" errors for the feeds loader.

## 1.12.2 on 2024-10-14

- FF-56 — Connection error `[SSL: WRONG_VERSION_NUMBER]` added to the list of known "ok" errors for the feeds loader.
- FF-51 — "No description" text for feeds without a description in the Feeds list.
- FF-52 — Fixed the `remove-deprecated-settings` command, now it really removes only deprecated settings.
- FF-50 — Unsubscribing from a feed now do not lead to excessive server requests due to cache invalidation.

## 1.12.1 on 2024-10-12

- Removed dependency on `pkg_resources`.

## 1.12.0 on 2024-10-12

**Operations required AFTER UPDATE**:

1. Run migrations `ffun migrate`
2. Run `ffun user-settings remove-deprecated-settings`
3. If you are using an OpenAI tag processor, specify a custom configuration file for tag processors with an API key. Details can be found in the updated README.md
4. If you want to periodically clean your database from old entries, add the call `ffun cleaner clean` to your cron tasks. It is recommended.

Changes:

- [gh-229](https://github.com/Tiendil/feeds.fun/issues/229) — Removed `Allow using OpenAI key for feeds in standard collections` user settings. It was confusing for users and not usable in the project's current state. Instead, you can specify an LLM API key to process collections (one per tag processor). By new logic, the service's owner is responsible for managing tags for all feeds in collections.
- [gh-245](https://github.com/Tiendil/feeds.fun/issues/245) — Implemented the universal LLM tag processor. Currently, it supports two API providers: OpenAI (ChatGPT) and Google (Gemini). Also:
    - The configuration of tag processors was moved to a separate file; see README.md for actual details.
    - The configuration of LLM models was moved to a separate file; see README.md for actual details.
    - You can configure multiple LLM tag processors with different parameters, including prompts, API keys, etc.
    - Token usage tracking has been replaced with cost tracking. User settings will convert automatically.
- Collections refactored. Now, they are configurable and empty by default. You can specify the path to the directory with collections configuration in `FFUN_FEEDS_COLLECTIONS_COLLECTION_CONFIGS`. An example of configuration can be found in the `./feeds_collections/collections`.
- `FFUN_META_MAX_ENTRIES_PER_FEED` setting moved to `FFUN_LIBRARY_MAX_ENTRIES_PER_FEED`.

## 1.11.1 on 2024-08-25

- [gh-136](https://github.com/Tiendil/feeds.fun/issues/136) — Links to the Discord server and to the Reddit community.
- [gh-24](https://github.com/Tiendil/feeds.fun/issues/24) — Link to the blog. Blog RSS is added to collections.

## 1.11.0 on 2024-08-21

- [gh-220](https://github.com/Tiendil/feeds.fun/issues/220) Removed Home link from internal pages.
- [gh-221](https://github.com/Tiendil/feeds.fun/issues/221) Slighly increased width of the central column on the main page.
- [gh-241](https://github.com/Tiendil/feeds.fun/issues/241) Optional plausible analytics for the frontend.
- [gh-41](https://github.com/Tiendil/feeds.fun/issues/41) Build dev service images only once.

## 1.10.1 on 2024-08-09

- [gh-231](https://github.com/Tiendil/feeds.fun/issues/231) CLI tool and base of texts to measure quality of tag processors.
- [gh-233](https://github.com/Tiendil/feeds.fun/issues/233) Improved prompt of OpenAI General processor. It should start to output more relevant tags.
- [gh-234](https://github.com/Tiendil/feeds.fun/issues/234) (possibly) Fixed deadlocks in updating tags properties by `apply_tags_properties`.

## 1.10.2 on 2024-08-09

- [gh-231](https://github.com/Tiendil/feeds.fun/issues/231) CLI tool and base of texts to measure quality of tag processors.
- [gh-233](https://github.com/Tiendil/feeds.fun/issues/233) Improved prompt of OpenAI General processor. It should start to output more relevant tags.
- [gh-234](https://github.com/Tiendil/feeds.fun/issues/234) (possibly) Fixed deadlocks in updating tags properties by `apply_tags_properties`.

## 1.10.0 on 2024-07-21

**Configs migration:** if you have turned on OpenAI ChatGPT processors, like `FFUN_LIBRARIAN_OPENAI_CHAT_35_FUNCTIONS_PROCESSOR__ENABLED="True"` or `FFUN_LIBRARIAN_OPENAI_CHAT_35_PROCESSOR__ENABLED="True", remove their configs and add configs for OpenAI General Processor, like `FFUN_LIBRARIAN_OPENAI_GENERAL_PROCESSOR__ENABLED="True"`, instead. The semantic of the configs is the same.

- [gh-227](https://github.com/Tiendil/feeds.fun/issues/227) — Old OpenAI ChatGPT processors is replaced with OpenAI General Processor which utilizes power of GPT-4o-mini model.

## 1.9.0 on 2024-07-19

**Recommendation:** Because `GPT-4o-mini` is much smarter than `GPT-3.5-turbo`, I recommend you to disable GPT function processor `FFUN_LIBRARIAN_OPENAI_CHAT_35_FUNCTIONS_PROCESSOR__ENABLED="False"` and use only standard GPT processor `FFUN_LIBRARIAN_OPENAI_CHAT_35_PROCESSOR__ENABLED="False"`. In [gh-227](https://github.com/Tiendil/feeds.fun/issues/227), one of the processors will be refactored, and one of them will be removed.

- [gh-226](https://github.com/Tiendil/feeds.fun/issues/226) Switch used OpenAI model to gpt4o-mini

## 1.8.1 on 2024-06-06

DB migration required: **no**

- [gh-217](https://github.com/Tiendil/feeds.fun/issues/217) Fixed: `apply_tags_properties` fails because of duplicated tags.

## 1.8.0 on 2024-06-05

DB migration required: **yes**

- [gh-214](https://github.com/Tiendil/feeds.fun/issues/214) Added not null constraint to the `o_tags_properties.tag_id` column.
- [gh-213](https://github.com/Tiendil/feeds.fun/issues/213) Fixed: `Native tags` tags processor periodically fails with deadlock in the database.

## 1.7.0 on 2024-06-02

Breaking changes:

- [gh-68](https://github.com/Tiendil/feeds.fun/issues/68) Supertokens services upgraded to version 9.0.2. If you are using Supertokens, you should upgrade them manually (from 5.0.0 to 9.0.2) according to the instructions in https://github.com/supertokens/supertokens-core/blob/master/CHANGELOG.md

Changes:

- [gh-128](https://github.com/Tiendil/feeds.fun/issues/128) Code migrated to Python 3.12
- [gh-128](https://github.com/Tiendil/feeds.fun/issues/128) Upgraded backend dependencies to the latest suitable versions
- [gh-205](https://github.com/Tiendil/feeds.fun/issues/205) Changelog added, with help of [Changy](https://github.com/Tiendil/changy)